CREATE TABLE Users (
login VARCHAR(8) UNIQUE NOT NULL,
  password VARCHAR(20) NOT NULL,
  user_state VARCHAR(15),
  user_group VARCHAR(15),
  created DATETIME NOT NULL,
  last_access  DATETIME NOT NULL,
  PRIMARY KEY (login)
)ENGINE=InnoDB, CHARSET=UTF8;

CREATE TABLE Administrators (
  id INT(11) AUTO_INCREMENT,
  email VARCHAR(50),
  phone_number VARCHAR(20),
  login VARCHAR(8) UNIQUE NOT NULL,
  PRIMARY KEY (id),
  CONSTRAINT FOREIGN KEY (login) REFERENCES Users (login)
  ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB, CHARSET=UTF8;

CREATE TABLE Students(
  id INT(11) AUTO_INCREMENT NOT NULL,
  name VARCHAR(15) NOT NULL,
  surname VARCHAR(15) NOT NULL,
  birthday DATE,
  email VARCHAR(50),
  average_rating DOUBLE,
  group_id INT(11) NOT NULL,
  login VARCHAR(8) UNIQUE NOT NULL,
  PRIMARY KEY (id),
  CONSTRAINT FOREIGN KEY (login) REFERENCES Users (login)
    ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT FOREIGN KEY (group_id) REFERENCES Groups (id)
  ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB, CHARSET=UTF8;


CREATE TABLE Groups(
  id INT(11) AUTO_INCREMENT NOT NULL,
  group_code VARCHAR(10) NOT NULL,
  speciality VARCHAR(50) NOT NULL,
  average_rating DOUBLE NOT NULL,
  began_study_date DATE NOT NULL,
  PRIMARY KEY (id),
  UNIQUE (group_code)
)ENGINE=InnoDB, CHARSET=UTF8;

